{"id":"epB2","dependencies":[{"name":"/home/brendan/gitRepo/node-translator/package.json","includedInParent":true,"mtime":1610796172900},{"name":"https","loc":{"line":4,"column":20},"parent":"/home/brendan/gitRepo/node-translator/dist/main.js","resolved":"/home/brendan/gitRepo/node-translator/node_modules/https-browserify/index.js"},{"name":"querystring","loc":{"line":5,"column":26},"parent":"/home/brendan/gitRepo/node-translator/dist/main.js","resolved":"/home/brendan/gitRepo/node-translator/node_modules/querystring-es3/index.js"},{"name":"crypto","loc":{"line":6,"column":21},"parent":"/home/brendan/gitRepo/node-translator/dist/main.js","resolved":"/home/brendan/gitRepo/node-translator/node_modules/crypto-browserify/index.js"},{"name":"./private/private","loc":{"line":7,"column":24},"parent":"/home/brendan/gitRepo/node-translator/dist/main.js","resolved":"/home/brendan/gitRepo/node-translator/dist/private/private.js"},{"name":"./errorCode","loc":{"line":8,"column":26},"parent":"/home/brendan/gitRepo/node-translator/dist/main.js","resolved":"/home/brendan/gitRepo/node-translator/dist/errorCode.js"},{"name":"buffer","parent":"/home/brendan/gitRepo/node-translator/dist/main.js","resolved":"/home/brendan/gitRepo/node-translator/node_modules/buffer/index.js"},{"name":"process","parent":"/home/brendan/gitRepo/node-translator/dist/main.js","resolved":"/home/brendan/gitRepo/node-translator/node_modules/process/browser.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar process = require(\"process\");\nvar e=require(\"buffer\").Buffer,r=require(\"process\");Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.translate=void 0;var o=require(\"https\"),t=require(\"querystring\"),a=require(\"crypto\"),n=require(\"./private/private\"),i=require(\"./errorCode\"),s=function(s){var p=a.randomBytes(3).toString(\"base64\"),u=Math.round((new Date).getTime()/1e3),c=a.createHash(\"sha256\").update(n.appKey+(s.length<=20?s:\"\"+s.slice(0,9)+s.length+s.slice(-10))+p+u.toString()+n.appSecret).digest(\"hex\"),d=(/[a-zA-Z]/.test(s[0]),{hostname:\"openapi.youdao.com\",path:\"/api?\"+t.stringify({q:s,appKey:n.appKey,salt:p,from:\"auto\",to:\"auto\",sign:c,signType:\"v3\",curtime:u}),method:\"GET\"}),g=o.request(d,function(o){var t=[];o.on(\"data\",function(e){t.push(e)}),o.on(\"end\",function(){var o=e.concat(t).toString(),a=JSON.parse(o);0===parseInt(a.errorCode)?(console.dir(a),r.exit(0)):a.errorCode in i.errorCodeMessage?(console.error(i.errorCodeMessage[a.errorCode]),r.exit(2)):(console.error(\"未知错误\"),r.exit(1))})});g.on(\"error\",function(e){console.error(e)}),g.end()};exports.translate=s;"},"sourceMaps":{"js":{"mappings":[{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":0}},{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":4}},{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":6}},{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":14}},{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":24}},{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":31}},{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":33}},{"source":"main.js","original":{"line":64,"column":0},"generated":{"line":3,"column":41}},{"source":"main.js","name":"Object","original":{"line":2,"column":0},"generated":{"line":3,"column":52}},{"source":"main.js","name":"defineProperty","original":{"line":2,"column":7},"generated":{"line":3,"column":59}},{"source":"main.js","name":"exports","original":{"line":2,"column":22},"generated":{"line":3,"column":74}},{"source":"main.js","original":{"line":2,"column":31},"generated":{"line":3,"column":82}},{"source":"main.js","original":{"line":2,"column":45},"generated":{"line":3,"column":95}},{"source":"main.js","name":"value","original":{"line":2,"column":47},"generated":{"line":3,"column":96}},{"source":"main.js","original":{"line":2,"column":54},"generated":{"line":3,"column":103}},{"source":"main.js","name":"exports","original":{"line":3,"column":0},"generated":{"line":3,"column":107}},{"source":"main.js","name":"translate","original":{"line":3,"column":8},"generated":{"line":3,"column":115}},{"source":"main.js","original":{"line":3,"column":20},"generated":{"line":3,"column":130}},{"source":"main.js","original":{"line":4,"column":0},"generated":{"line":3,"column":132}},{"source":"main.js","name":"https","original":{"line":4,"column":4},"generated":{"line":3,"column":136}},{"source":"main.js","name":"require","original":{"line":4,"column":12},"generated":{"line":3,"column":138}},{"source":"main.js","original":{"line":4,"column":20},"generated":{"line":3,"column":146}},{"source":"main.js","name":"querystring","original":{"line":5,"column":4},"generated":{"line":3,"column":155}},{"source":"main.js","name":"require","original":{"line":5,"column":18},"generated":{"line":3,"column":157}},{"source":"main.js","original":{"line":5,"column":26},"generated":{"line":3,"column":165}},{"source":"main.js","name":"crypto","original":{"line":6,"column":4},"generated":{"line":3,"column":180}},{"source":"main.js","name":"require","original":{"line":6,"column":13},"generated":{"line":3,"column":182}},{"source":"main.js","original":{"line":6,"column":21},"generated":{"line":3,"column":190}},{"source":"main.js","name":"private_1","original":{"line":7,"column":4},"generated":{"line":3,"column":200}},{"source":"main.js","name":"require","original":{"line":7,"column":16},"generated":{"line":3,"column":202}},{"source":"main.js","original":{"line":7,"column":24},"generated":{"line":3,"column":210}},{"source":"main.js","name":"errorCode_1","original":{"line":8,"column":4},"generated":{"line":3,"column":231}},{"source":"main.js","name":"require","original":{"line":8,"column":18},"generated":{"line":3,"column":233}},{"source":"main.js","original":{"line":8,"column":26},"generated":{"line":3,"column":241}},{"source":"main.js","name":"translate","original":{"line":9,"column":4},"generated":{"line":3,"column":256}},{"source":"main.js","original":{"line":9,"column":16},"generated":{"line":3,"column":258}},{"source":"main.js","name":"word","original":{"line":9,"column":26},"generated":{"line":3,"column":267}},{"source":"main.js","name":"salt","original":{"line":11,"column":8},"generated":{"line":3,"column":270}},{"source":"main.js","name":"salt","original":{"line":11,"column":8},"generated":{"line":3,"column":274}},{"source":"main.js","name":"crypto","original":{"line":11,"column":15},"generated":{"line":3,"column":276}},{"source":"main.js","name":"randomBytes","original":{"line":11,"column":22},"generated":{"line":3,"column":278}},{"source":"main.js","original":{"line":11,"column":34},"generated":{"line":3,"column":290}},{"source":"main.js","name":"toString","original":{"line":11,"column":37},"generated":{"line":3,"column":293}},{"source":"main.js","original":{"line":11,"column":46},"generated":{"line":3,"column":302}},{"source":"main.js","name":"currentTime","original":{"line":12,"column":8},"generated":{"line":3,"column":312}},{"source":"main.js","name":"Math","original":{"line":12,"column":22},"generated":{"line":3,"column":314}},{"source":"main.js","name":"round","original":{"line":12,"column":27},"generated":{"line":3,"column":319}},{"source":"main.js","original":{"line":12,"column":33},"generated":{"line":3,"column":326}},{"source":"main.js","name":"Date","original":{"line":12,"column":37},"generated":{"line":3,"column":330}},{"source":"main.js","name":"getTime","original":{"line":12,"column":44},"generated":{"line":3,"column":336}},{"source":"main.js","original":{"line":12,"column":56},"generated":{"line":3,"column":346}},{"source":"main.js","name":"sign","original":{"line":13,"column":8},"generated":{"line":3,"column":351}},{"source":"main.js","name":"crypto","original":{"line":13,"column":15},"generated":{"line":3,"column":353}},{"source":"main.js","name":"createHash","original":{"line":14,"column":9},"generated":{"line":3,"column":355}},{"source":"main.js","original":{"line":14,"column":20},"generated":{"line":3,"column":366}},{"source":"main.js","name":"update","original":{"line":15,"column":9},"generated":{"line":3,"column":376}},{"source":"main.js","name":"private_1","original":{"line":15,"column":16},"generated":{"line":3,"column":383}},{"source":"main.js","name":"appKey","original":{"line":15,"column":26},"generated":{"line":3,"column":385}},{"source":"main.js","name":"word","original":{"line":16,"column":9},"generated":{"line":3,"column":393}},{"source":"main.js","name":"length","original":{"line":16,"column":14},"generated":{"line":3,"column":395}},{"source":"main.js","original":{"line":16,"column":24},"generated":{"line":3,"column":403}},{"source":"main.js","name":"word","original":{"line":16,"column":29},"generated":{"line":3,"column":406}},{"source":"main.js","original":{"line":16,"column":36},"generated":{"line":3,"column":408}},{"source":"main.js","name":"word","original":{"line":16,"column":41},"generated":{"line":3,"column":411}},{"source":"main.js","name":"slice","original":{"line":16,"column":46},"generated":{"line":3,"column":413}},{"source":"main.js","original":{"line":16,"column":52},"generated":{"line":3,"column":419}},{"source":"main.js","original":{"line":16,"column":55},"generated":{"line":3,"column":421}},{"source":"main.js","name":"word","original":{"line":16,"column":60},"generated":{"line":3,"column":424}},{"source":"main.js","name":"length","original":{"line":16,"column":65},"generated":{"line":3,"column":426}},{"source":"main.js","name":"word","original":{"line":16,"column":74},"generated":{"line":3,"column":433}},{"source":"main.js","name":"slice","original":{"line":16,"column":79},"generated":{"line":3,"column":435}},{"source":"main.js","original":{"line":16,"column":86},"generated":{"line":3,"column":442}},{"source":"main.js","name":"salt","original":{"line":17,"column":8},"generated":{"line":3,"column":447}},{"source":"main.js","name":"currentTime","original":{"line":18,"column":8},"generated":{"line":3,"column":449}},{"source":"main.js","name":"toString","original":{"line":18,"column":20},"generated":{"line":3,"column":451}},{"source":"main.js","name":"private_1","original":{"line":19,"column":8},"generated":{"line":3,"column":462}},{"source":"main.js","name":"appSecret","original":{"line":19,"column":18},"generated":{"line":3,"column":464}},{"source":"main.js","name":"digest","original":{"line":20,"column":9},"generated":{"line":3,"column":475}},{"source":"main.js","original":{"line":20,"column":16},"generated":{"line":3,"column":482}},{"source":"main.js","name":"options","original":{"line":32,"column":8},"generated":{"line":3,"column":489}},{"source":"main.js","original":{"line":21,"column":17},"generated":{"line":3,"column":492}},{"source":"main.js","name":"test","original":{"line":21,"column":28},"generated":{"line":3,"column":503}},{"source":"main.js","name":"word","original":{"line":21,"column":33},"generated":{"line":3,"column":508}},{"source":"main.js","original":{"line":21,"column":38},"generated":{"line":3,"column":510}},{"source":"main.js","original":{"line":32,"column":18},"generated":{"line":3,"column":514}},{"source":"main.js","name":"hostname","original":{"line":33,"column":8},"generated":{"line":3,"column":515}},{"source":"main.js","original":{"line":33,"column":18},"generated":{"line":3,"column":524}},{"source":"main.js","name":"path","original":{"line":34,"column":8},"generated":{"line":3,"column":545}},{"source":"main.js","original":{"line":34,"column":14},"generated":{"line":3,"column":550}},{"source":"main.js","name":"querystring","original":{"line":22,"column":16},"generated":{"line":3,"column":558}},{"source":"main.js","name":"stringify","original":{"line":22,"column":28},"generated":{"line":3,"column":560}},{"source":"main.js","original":{"line":22,"column":38},"generated":{"line":3,"column":570}},{"source":"main.js","name":"q","original":{"line":23,"column":8},"generated":{"line":3,"column":571}},{"source":"main.js","name":"word","original":{"line":23,"column":11},"generated":{"line":3,"column":573}},{"source":"main.js","name":"appKey","original":{"line":24,"column":8},"generated":{"line":3,"column":575}},{"source":"main.js","name":"private_1","original":{"line":24,"column":16},"generated":{"line":3,"column":582}},{"source":"main.js","name":"appKey","original":{"line":24,"column":26},"generated":{"line":3,"column":584}},{"source":"main.js","name":"salt","original":{"line":25,"column":8},"generated":{"line":3,"column":591}},{"source":"main.js","name":"salt","original":{"line":25,"column":14},"generated":{"line":3,"column":596}},{"source":"main.js","name":"from","original":{"line":26,"column":8},"generated":{"line":3,"column":598}},{"source":"main.js","original":{"line":26,"column":14},"generated":{"line":3,"column":603}},{"source":"main.js","name":"to","original":{"line":27,"column":8},"generated":{"line":3,"column":610}},{"source":"main.js","original":{"line":27,"column":12},"generated":{"line":3,"column":613}},{"source":"main.js","name":"sign","original":{"line":28,"column":8},"generated":{"line":3,"column":620}},{"source":"main.js","name":"sign","original":{"line":28,"column":14},"generated":{"line":3,"column":625}},{"source":"main.js","name":"signType","original":{"line":29,"column":8},"generated":{"line":3,"column":627}},{"source":"main.js","original":{"line":29,"column":18},"generated":{"line":3,"column":636}},{"source":"main.js","name":"curtime","original":{"line":30,"column":8},"generated":{"line":3,"column":641}},{"source":"main.js","name":"currentTime","original":{"line":30,"column":17},"generated":{"line":3,"column":649}},{"source":"main.js","name":"method","original":{"line":35,"column":8},"generated":{"line":3,"column":653}},{"source":"main.js","original":{"line":35,"column":16},"generated":{"line":3,"column":660}},{"source":"main.js","name":"req","original":{"line":37,"column":8},"generated":{"line":3,"column":668}},{"source":"main.js","name":"https","original":{"line":37,"column":14},"generated":{"line":3,"column":670}},{"source":"main.js","name":"request","original":{"line":37,"column":20},"generated":{"line":3,"column":672}},{"source":"main.js","name":"options","original":{"line":37,"column":28},"generated":{"line":3,"column":680}},{"source":"main.js","original":{"line":37,"column":37},"generated":{"line":3,"column":682}},{"source":"main.js","name":"res","original":{"line":37,"column":47},"generated":{"line":3,"column":691}},{"source":"main.js","name":"chunks","original":{"line":38,"column":12},"generated":{"line":3,"column":694}},{"source":"main.js","name":"chunks","original":{"line":38,"column":12},"generated":{"line":3,"column":698}},{"source":"main.js","original":{"line":38,"column":21},"generated":{"line":3,"column":700}},{"source":"main.js","name":"res","original":{"line":39,"column":8},"generated":{"line":3,"column":703}},{"source":"main.js","name":"on","original":{"line":39,"column":12},"generated":{"line":3,"column":705}},{"source":"main.js","original":{"line":39,"column":15},"generated":{"line":3,"column":708}},{"source":"main.js","original":{"line":39,"column":23},"generated":{"line":3,"column":715}},{"source":"main.js","name":"chunk","original":{"line":39,"column":33},"generated":{"line":3,"column":724}},{"source":"main.js","name":"chunks","original":{"line":40,"column":12},"generated":{"line":3,"column":727}},{"source":"main.js","name":"push","original":{"line":40,"column":19},"generated":{"line":3,"column":729}},{"source":"main.js","name":"chunk","original":{"line":40,"column":24},"generated":{"line":3,"column":734}},{"source":"main.js","name":"res","original":{"line":42,"column":8},"generated":{"line":3,"column":739}},{"source":"main.js","name":"on","original":{"line":42,"column":12},"generated":{"line":3,"column":741}},{"source":"main.js","original":{"line":42,"column":15},"generated":{"line":3,"column":744}},{"source":"main.js","original":{"line":42,"column":22},"generated":{"line":3,"column":750}},{"source":"main.js","name":"string","original":{"line":43,"column":16},"generated":{"line":3,"column":761}},{"source":"main.js","name":"string","original":{"line":43,"column":16},"generated":{"line":3,"column":765}},{"source":"main.js","name":"Buffer","original":{"line":43,"column":25},"generated":{"line":3,"column":767}},{"source":"main.js","name":"concat","original":{"line":43,"column":32},"generated":{"line":3,"column":769}},{"source":"main.js","name":"chunks","original":{"line":43,"column":39},"generated":{"line":3,"column":776}},{"source":"main.js","name":"toString","original":{"line":43,"column":47},"generated":{"line":3,"column":779}},{"source":"main.js","name":"obj","original":{"line":44,"column":16},"generated":{"line":3,"column":790}},{"source":"main.js","name":"JSON","original":{"line":44,"column":22},"generated":{"line":3,"column":792}},{"source":"main.js","name":"parse","original":{"line":44,"column":27},"generated":{"line":3,"column":797}},{"source":"main.js","name":"string","original":{"line":44,"column":33},"generated":{"line":3,"column":803}},{"source":"main.js","original":{"line":45,"column":44},"generated":{"line":3,"column":806}},{"source":"main.js","name":"parseInt","original":{"line":45,"column":16},"generated":{"line":3,"column":810}},{"source":"main.js","name":"obj","original":{"line":45,"column":25},"generated":{"line":3,"column":819}},{"source":"main.js","name":"errorCode","original":{"line":45,"column":29},"generated":{"line":3,"column":821}},{"source":"main.js","name":"console","original":{"line":46,"column":16},"generated":{"line":3,"column":833}},{"source":"main.js","name":"dir","original":{"line":46,"column":24},"generated":{"line":3,"column":841}},{"source":"main.js","name":"obj","original":{"line":46,"column":28},"generated":{"line":3,"column":845}},{"source":"main.js","name":"process","original":{"line":47,"column":16},"generated":{"line":3,"column":848}},{"source":"main.js","name":"exit","original":{"line":47,"column":24},"generated":{"line":3,"column":850}},{"source":"main.js","original":{"line":47,"column":29},"generated":{"line":3,"column":855}},{"source":"main.js","name":"obj","original":{"line":49,"column":21},"generated":{"line":3,"column":859}},{"source":"main.js","name":"errorCode","original":{"line":49,"column":25},"generated":{"line":3,"column":861}},{"source":"main.js","name":"errorCode_1","original":{"line":49,"column":38},"generated":{"line":3,"column":874}},{"source":"main.js","name":"errorCodeMessage","original":{"line":49,"column":50},"generated":{"line":3,"column":876}},{"source":"main.js","name":"console","original":{"line":50,"column":16},"generated":{"line":3,"column":894}},{"source":"main.js","name":"error","original":{"line":50,"column":24},"generated":{"line":3,"column":902}},{"source":"main.js","name":"errorCode_1","original":{"line":50,"column":30},"generated":{"line":3,"column":908}},{"source":"main.js","name":"errorCodeMessage","original":{"line":50,"column":42},"generated":{"line":3,"column":910}},{"source":"main.js","name":"obj","original":{"line":50,"column":59},"generated":{"line":3,"column":927}},{"source":"main.js","name":"errorCode","original":{"line":50,"column":63},"generated":{"line":3,"column":929}},{"source":"main.js","name":"process","original":{"line":51,"column":16},"generated":{"line":3,"column":941}},{"source":"main.js","name":"exit","original":{"line":51,"column":24},"generated":{"line":3,"column":943}},{"source":"main.js","original":{"line":51,"column":29},"generated":{"line":3,"column":948}},{"source":"main.js","name":"console","original":{"line":54,"column":16},"generated":{"line":3,"column":953}},{"source":"main.js","name":"error","original":{"line":54,"column":24},"generated":{"line":3,"column":961}},{"source":"main.js","original":{"line":54,"column":30},"generated":{"line":3,"column":967}},{"source":"main.js","name":"process","original":{"line":55,"column":16},"generated":{"line":3,"column":975}},{"source":"main.js","name":"exit","original":{"line":55,"column":24},"generated":{"line":3,"column":977}},{"source":"main.js","original":{"line":55,"column":29},"generated":{"line":3,"column":982}},{"source":"main.js","name":"req","original":{"line":59,"column":4},"generated":{"line":3,"column":990}},{"source":"main.js","name":"on","original":{"line":59,"column":8},"generated":{"line":3,"column":992}},{"source":"main.js","original":{"line":59,"column":11},"generated":{"line":3,"column":995}},{"source":"main.js","original":{"line":59,"column":20},"generated":{"line":3,"column":1003}},{"source":"main.js","name":"e","original":{"line":59,"column":30},"generated":{"line":3,"column":1012}},{"source":"main.js","name":"console","original":{"line":60,"column":8},"generated":{"line":3,"column":1015}},{"source":"main.js","name":"error","original":{"line":60,"column":16},"generated":{"line":3,"column":1023}},{"source":"main.js","name":"e","original":{"line":60,"column":22},"generated":{"line":3,"column":1029}},{"source":"main.js","name":"req","original":{"line":62,"column":4},"generated":{"line":3,"column":1034}},{"source":"main.js","name":"end","original":{"line":62,"column":8},"generated":{"line":3,"column":1036}},{"source":"main.js","name":"exports","original":{"line":64,"column":0},"generated":{"line":3,"column":1043}},{"source":"main.js","name":"translate","original":{"line":64,"column":8},"generated":{"line":3,"column":1051}},{"source":"main.js","name":"translate","original":{"line":64,"column":20},"generated":{"line":3,"column":1061}}],"sources":{"main.js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.translate = void 0;\nvar https = require(\"https\");\nvar querystring = require(\"querystring\");\nvar crypto = require(\"crypto\");\nvar private_1 = require(\"./private/private\");\nvar errorCode_1 = require(\"./errorCode\");\nvar translate = function (word) {\n    // crypto 无所不能\n    var salt = crypto.randomBytes(3).toString(\"base64\");\n    var currentTime = Math.round(new Date().getTime() / 1000);\n    var sign = crypto\n        .createHash(\"sha256\")\n        .update(private_1.appKey +\n        (word.length <= 20 ? word : \"\" + word.slice(0, 9) + word.length + word.slice(-10)) +\n        salt +\n        currentTime.toString() +\n        private_1.appSecret)\n        .digest(\"hex\");\n    var target = /[a-zA-Z]/.test(word[0]) ? { from: \"en\", to: \"zh-CNS\" } : { from: \"zh-CNS\", to: \"en\" };\n    var query = querystring.stringify({\n        q: word,\n        appKey: private_1.appKey,\n        salt: salt,\n        from: \"auto\",\n        to: \"auto\",\n        sign: sign,\n        signType: \"v3\",\n        curtime: currentTime,\n    });\n    var options = {\n        hostname: \"openapi.youdao.com\",\n        path: \"/api?\" + query,\n        method: \"GET\",\n    };\n    var req = https.request(options, function (res) {\n        var chunks = [];\n        res.on(\"data\", function (chunk) {\n            chunks.push(chunk);\n        });\n        res.on(\"end\", function () {\n            var string = Buffer.concat(chunks).toString();\n            var obj = JSON.parse(string);\n            if (parseInt(obj.errorCode) === 0) {\n                console.dir(obj);\n                process.exit(0);\n            }\n            else if (obj.errorCode in errorCode_1.errorCodeMessage) {\n                console.error(errorCode_1.errorCodeMessage[obj.errorCode]);\n                process.exit(2);\n            }\n            else {\n                console.error(\"未知错误\");\n                process.exit(1);\n            }\n        });\n    });\n    req.on(\"error\", function (e) {\n        console.error(e);\n    });\n    req.end();\n};\nexports.translate = translate;\n"},"lineCount":null}},"error":null,"hash":"5332ee896c6402edbb88d69c7814ce70","cacheData":{"env":{}}}